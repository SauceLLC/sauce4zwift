<!DOCTYPE html>
<html class="settings-page">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';"/>

        <title>Settings / Management - Sauce for Zwiftâ„¢</title>

        <link id="favicon" rel="shortcut icon" href="images/favicon.png"/>
        <link rel="stylesheet" href="css/common.css"/>
        <link rel="stylesheet" href="css/overview-settings.css"/>

        <script type="module">
            import {settingsMain} from './src/overview.mjs';
            addEventListener('DOMContentLoaded', settingsMain);
        </script>
    </head>
    <body>
        <div id="titlebar">
            <header>
                <div class="title">Settings / Management</div>
                <div class="filler"></div>
                <div class="buttons">
                    <div title="Close this window" class="button close electron-only"><ms>close</ms></div>
                </div>
            </header>
        </div>
        <div id="settings">
            <form class="app-settings section">
                <div class="title">App Settings</div>
                <label>
                    <key>Version:</key>
                    <span class="display-field" name="version"></span>
                </label>
                <label title="Access Sauce for Zwift from any browser on your network">
                    <key>Enable Web Server:</key>
                    <input type="checkbox" name="webServerEnabled"/>
                    <span class="restart-required"></span>
                </label>
                <label>
                    <key>Web Server Port:</key>
                    <input data-depends-on="webServerEnabled" type="number" size="5"
                           name="webServerPort"/>
                    <span class="restart-required"></span>
                </label>
                <label>
                    <key>Web Server URL:</key>
                    <a href external target="_blank" class="display-field" name="webServerURL"
                       data-depends-on="webServerEnabled"></a>
                </label>
                <label title="Game Connection allows Sauce to perform optional functions like switching the athlete being watched.

NOTE: Game Connection uses the Companion App protocol which only supports a single connection.  If you require use of the Zwift Companion App DO NOT enable this feature.">
                    <key>Game Connection:</key>
                    <input type="checkbox" name="gameConnectionEnabled"/>
                    <span class="restart-required"></span>
                    <span class="display-field" name="gameConnectionStatus"></span>
                </label>
                <label>
                    <key>Main Zwift Login:</key>
                    <span class="display-field" name="mainZwiftLogin">-</span>
                    <div class="std button" title="Clear stored info for this account.  You will be prompted for a new login."
                         data-action="logout-zwift" data-id="main">Logout</div>
                    <span class="restart-required"></span>
                </label>
                <label>
                    <key>Monitor Zwift Login:</key>
                    <span class="display-field" name="monitorZwiftLogin">-</span>
                    <div class="std button" title="Clear stored info for this account.  You will be prompted for a new login."
                         data-action="logout-zwift" data-id="monitor">Logout</div>
                    <span class="restart-required"></span>
                </label>
            </form>

            <form class="settings section">
                <div class="title">Window Settings</div>
                <label>
                    <key>Left fields:</key>
                    <input type="number" min="0" max="10" step="1" name="leftFields"/>
                </label>
                <label>
                    <key>Right fields:</key>
                    <input type="number" min="0" max="10" step="1" name="rightFields"/>
                </label>
                <label title="Prevent fields from rotating on click">
                    <key>Lock fields:</key>
                    <input type="checkbox" name="lockedFields"/>
                </label>
                <label>
                    <key>Imperial units:</key>
                    <input type="checkbox" name="/imperialUnits"/>
                </label>
                <label title="When no data is detected automatically hide windows"
                       class="electron-only">
                    <key>Auto hide windows:</key>
                    <input type="checkbox" name="autoHideWindows"/>
                </label>
                <label title="Use this to respect the notch on a MacBookPro or avoid overlap with the Zwift HUD">
                    <key>Center gap size:</key>
                    <input type="number" name="centerGapSize" min="0" max="1000" step="1"/>
                </label>
            </form>

            <div id="windows" class="section">
                <div class="title">Active Windows</div>
                <table class="active-windows">
                    <thead><tr><th>Name</th><th>State</th><th></th><th></th></tr></thead>
                    <tbody></tbody>
                </table>
                <div class="add-new">
                    <div class="title">Add a new window</div>
                    <select name="type"></select>
                    <input type="button" value="Create"/>
                </div>
            </div>

            <div class="section electron-only">
                <div class="title">Maintenance</div>
                <div class="action-buttons">
                    <div class="std button danger" title="Reset window positions and configuration to defaults"
                         data-action="reset-state">Reset to defaults</div>
                    <div class="std button" title="Clear the athlete cache database"
                         data-action="reset-athletes-db">Clear Athletes Cache</div>
                    <div class="std button" data-action="restart">Restart</div>
                </div>
            </div>
        </div>

        <footer class="legal">
            <a href="release-notes.html?frame&width=600&height=0.8" target="_blank">Release Notes</a>
            |
            <a href="https://saucellc.io/legal/sauce4zwift-terms.html?frame" target="_blank">Terms and Conditions</a>
            |
            <a href="https://saucellc.io/legal/sauce4zwift-privacy.html?frame" target="_blank">Privacy Policy</a>
            |
            <a href="mailto://support@saucellc.io">Support</a>
        </footer>
    </body>
</html>
